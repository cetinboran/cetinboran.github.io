<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Docker 101 · Çetin Boran Mesüm
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Çetin Boran Mesüm">
<meta name="description" content="This is Docker 101">
<meta name="keywords" content="programming,cyber security,personal">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Docker 101">
  <meta name="twitter:description" content="This is Docker 101">

<meta property="og:url" content="http://localhost:1313/posts/docker/">
  <meta property="og:site_name" content="Çetin Boran Mesüm">
  <meta property="og:title" content="Docker 101">
  <meta property="og:description" content="This is Docker 101">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-06T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-05-06T00:00:00+00:00">
    <meta property="article:tag" content="Docker">
    <meta property="article:tag" content="Dockerfile">
    <meta property="article:tag" content="Docker Compose">
    <meta property="article:tag" content="Container">




<link rel="canonical" href="http://localhost:1313/posts/docker/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://localhost:1313/">
      Çetin Boran Mesüm
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Posts</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact me</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://localhost:1313/posts/docker/">
              Docker 101
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-05-06T00:00:00Z">
                May 6, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              8-minute read
            </span>
          </div>
          <div class="authors">
  <i class="fa-solid fa-user" aria-hidden="true"></i>
    <a href="/authors/%C3%A7etin-boran-mes%C3%BCm/">Çetin Boran Mesüm</a></div>

          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/tools/">Tools</a></div>

          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/docker/">Docker</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/dockerfile/">Dockerfile</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/docker-compose/">Docker Compose</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/container/">Container</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h1 id="1---docker">
  1 - Docker
  <a class="heading-link" href="#1---docker">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<h2 id="11-konteyner">
  1.1 Konteyner
  <a class="heading-link" href="#11-konteyner">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="nedir">
  Nedir?
  <a class="heading-link" href="#nedir">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Konteyner, bir uygulamanın veya bir hizmetin kendi kütüphaneleri ve bağımlılıkları ile birlikte dış ortam ve uygulamalardan izole bir şekilde tutulmasına denir. Bu, bir tür sanallaştırma teknolojisidir.</p>
<h3 id="konteyner--sanal-makine-vm">
  Konteyner != Sanal Makine (VM)
  <a class="heading-link" href="#konteyner--sanal-makine-vm">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>Sanal makineler genellikle daha fazla sistem kaynağına ihtiyaç duyar ve daha uzun başlatma sürelerine sahiptir.</li>
<li>Konteynerlara kıyasla, hafif ve hızlı dağıtım gerektiren senaryolarda sanal makineler daha ağır bir seçenek olabilir.</li>
<li>Sanal makineler, daha fazla izolasyon içeren yerlerde tercih edilebilirler.</li>
</ul>
<p>Aşağıdaki resimde görüldüğü gibi, sanal makinelerin hepsi işletim sistemi üzerine kurulmuştur. Dolayısıyla izolasyonları konteynerlara kıyasla daha fazladır, ancak bu hızlı dağıtım ve taşınabilirliği azaltır.</p>
<p>Ancak konteynerlarda fazladan işletim sistemi yoktur, dolayısıyla sanal makinelerden daha az yer kaplarlar.</p>
<p><img alt="Difference" src="https://i.hizliresim.com/87v482l.jpg"></p>
<h3 id="örnek">
  Örnek
  <a class="heading-link" href="#%c3%b6rnek">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Diyelim ki backend ve database olarak PostgreSQL kullanacağız. Bu işi konteynerlarda yapmak hızlı ve minimum yer kaplarken, sanal makinelerde yapmak için iki ayrı işletim sistemi kurmak ve gerekli programları eklemek gerekmektedir; bu da gereksiz yer ve zaman harcamaya neden olur.</p>
<h2 id="12-docker">
  1.2 Docker
  <a class="heading-link" href="#12-docker">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="nedir-1">
  Nedir?
  <a class="heading-link" href="#nedir-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Docker, konteyner&rsquo;ları oluşturmak, yönetmek ve çalıştırmak için bir dizi araç ve hizmet sunan bir platformdur.</p>
<h3 id="neden-kullanılır">
  Neden Kullanılır?
  <a class="heading-link" href="#neden-kullan%c4%b1l%c4%b1r">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>İzolasyon</li>
<li>Taşınabilirlik</li>
<li>Hızlı dağıtım</li>
<li>Kaynak Verimliliği</li>
</ul>
<p>Docker, hızlı dağıtım ve taşınabilirliği image&rsquo;ler yardımı ile yapar. Image&rsquo;ler sayesinde bir satır komut ile istediğimiz uygulamayı indirip kullanabiliriz. İleride daha çok değineceğiz.</p>
<h3 id="örnek-1">
  Örnek
  <a class="heading-link" href="#%c3%b6rnek-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Diyelim ki bir Backend ve bir Web Server&rsquo;imiz var. Bu iki program da A paketinin x.x.x sürümünü kullansın. Şimdi eğer bizim Backend&rsquo;e bir güncelleme geldiğinde ve artık A paketinin x.x.y sürümünü istediğinde ne yapacağız? Bizim Backend&rsquo;imiz A pakettenin x.x.y sürümünü istiyor ancak Web Server&rsquo;imiz A paketinin x.x.x sürümünü istiyor. Yani kısaca sürüm uyuşmazlığı yaşanıyor. Bu gibi durumlarda Docker kullanılabilir. Biz gidip Backend&rsquo;i bir konteyner içine alacağız ve içine A paketinin x.x.y sürümünü yükleyeceğiz, aynı şekilde Web Server&rsquo;i konteyner içine alacağız ve içine A paketinin x.x.x sürümünü yükleyeceğiz. Böylelikle bu iki uyuşmayan program, artık birlikte konteyner&rsquo;lar yardımıyla kendi kütüphaneleri ve bağımlılıklarını kullanarak çalışabiliyorlar.</p>
<h3 id="nasıl-kullanılır">
  Nasıl Kullanılır?
  <a class="heading-link" href="#nas%c4%b1l-kullan%c4%b1l%c4%b1r">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Ben burada Docker Desktop uygulamasını anlatmak yerine biraz command line üzerinden en çok kullanılan komutları anlatmayı daha uygun gördüm.</p>
<p><strong>Global</strong></p>
<ul>
<li><strong><code>docker search image:tag</code></strong>: <a href="https://hub.docker.com/"  class="external-link" target="_blank" rel="noopener">Docker Hub&rsquo;tan</a> bir imaj arar.</li>
<li><strong><code>docker pull image:tag</code></strong>: <a href="https://hub.docker.com/"  class="external-link" target="_blank" rel="noopener">Docker Hub&rsquo;tan</a> bir imajı indirir.</li>
</ul>
<p><strong>Network</strong></p>
<ul>
<li><strong><code>docker network create name</code></strong>: Kendi ağınızı oluşturur.</li>
<li><strong><code>docker network ls</code></strong>: Oluşturulan tüm ağları listeler.</li>
<li><strong><code>docker network rm network_id</code></strong>: Belirtilen ağı siler.</li>
</ul>
<p><strong>Image</strong></p>
<ul>
<li><strong><code>docker images</code> / <code>docker image ls</code></strong>: Bilgisayarınıza yüklenmiş tüm imajları listeler.</li>
<li><strong><code>docker image rm image_id</code></strong>: Belirtilen imajı siler.</li>
<li><strong><code>docker image inspect &lt;image&gt;</code></strong>: İmaj hakkında detaylı bilgi sağlar.</li>
<li><strong><code>docker image build dockerFilePath</code> / <code>docker build dockerFilePath</code></strong>: Docker Dosyası kullanarak özel bir imaj oluşturmanızı sağlar.</li>
<li><strong><code>docker run [OPTIONS] image [COMMANDS]</code></strong>: Bir imajı kullanarak bir konteyner oluşturur. [COMMANDS] tamamlandıktan sonra kapanır.
<ul>
<li><strong>OPTIONS</strong>:
<ul>
<li><code>--name</code>: Konteynera özel bir isim atar.</li>
<li><code>--rm</code>: Konteyner işini bitirdikten sonra otomatik olarak kendini siler.</li>
<li><code>-it</code>: Konteyneri interaktif modda başlatır ve terminali size bağlar.</li>
<li><code>-p</code>: Konteynerin belirli bir portunu ana makineye yönlendirmek için kullanılır.</li>
<li><code>-d</code>: Konteynerı arkaplanda çalıştırır.</li>
<li><code>-e</code>: Çevresel değişkenleri belirlemek için kullanılır.</li>
<li><code>-v</code>: Ana makinedeki bir dizini veya dosyayı konteynere bağlamak için kullanılır.</li>
<li><code>--network &lt;name&gt;</code>: Konteynerin bağlı olduğu ağı belirtir.</li>
<li><code>--secuity-opt PROFILES</code>: Konteynerin bağlıolduğu ağı belirtir.</li>
<li><code>--privileged</code>: Konteyneri ana makinenin kernel düzeyinde ayrıcalıklı bir modda çalıştırır ve tüm yetkilere sahip olur.</li>
<li><code>–-cap-add capability</code>: Konteyner’a yetenek ekler.</li>
<li><code>-–cap-drop capability</code>: Konteyner&rsquo;dan yetenek çıkarır.
<ul>
<li><code>ALL</code>: yazılırsa eğer capabilitiy yerine bütün belirli yetenekleri ekler/çıkarır.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>COMMANDS</strong>
<ul>
<li>Aslında buradaki komutlar terminalde yazabileceğiniz her şey olabilir.</li>
<li><code>ls -l</code></li>
<li><code>sleep 3600</code></li>
</ul>
</li>
</ul>
<p><strong>Containers</strong></p>
<ul>
<li><strong><code>docker ps</code></strong>: Çalışan konteyner’ları listeler.
<ul>
<li><code>-a</code>: Çalışan çalışmayan tüm konteyner’ları listeler.</li>
</ul>
</li>
<li><strong><code>docker start container_id/name</code></strong>: Belirli bir Konteyner’ı çalıştırır.</li>
<li><strong><code>docker stop container_id/name</code></strong>: Belirli bir Konteyner’ı durdurur.</li>
<li><strong><code>docker restart container_id/name</code></strong>: Belirli bir konteyner’ı yeniden başlatır.</li>
<li><strong><code>docker rm container_id/name</code></strong>: Belirli bir konteyner’ı siler.</li>
<li><strong><code>docker exec [OPTIONS] &lt;container_id&gt; [COMMAND]</code></strong>: Çalışan bir konteyner’da komut çalıştırmamızı sağlar. Kullanımı <code>docker run ...</code> ile benzerdir.
<ul>
<li><strong><code>docker exec my_container ls -l</code></strong>: my_container içinde <code>ls –l</code> komutunu çalıştırır.</li>
</ul>
</li>
</ul>
<h3 id="uygulama">
  Uygulama
  <a class="heading-link" href="#uygulama">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Şimdi sizden basit bir uygulama yapmanızı isteyeceğim, docker&rsquo;ı açın hello-world image&rsquo;ini Docker Hub&rsquo;tan indirin. Kontrol edin bakalım inmiş mi? Bu image&rsquo;i kullanarak düz bir konteyner oluşturun işlevi nedir?. Çalışıp çalışmayan bütün konteyner&rsquo;ları listeleyin ve ardından o açtığınız konteyner&rsquo;ı silmeyi deneyin. Konteyner oluştururken yukarıda öğrendiğiniz bütün OPTION ları deneyip biraz zaman geçirmenizi tavsiye ediyorum.</p>
<h2 id="13-dockerfile">
  1.3 Dockerfile
  <a class="heading-link" href="#13-dockerfile">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="nedir-2">
  Nedir?
  <a class="heading-link" href="#nedir-2">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Dockerfile, kendi özelleştirdiğimiz imajları oluşturmak için kullanılan bir dosyadır.</p>
<h3 id="nasıl-kullanılır-1">
  Nasıl Kullanılır?
  <a class="heading-link" href="#nas%c4%b1l-kullan%c4%b1l%c4%b1r-1">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li><strong><code>FROM image:tag</code></strong>: Konteyner’ın hangi image’ı temel alacağını beliritir.</li>
<li><strong><code>RUN command</code>:</strong> İmaj üzerinde komutları çalıştırmak için kullanılır.</li>
<li>**<code>COPY hostPath containerPath**</code>: Ana makinadan konteyner içine dosya kopyalamamızı sağlar.</li>
<li><strong><code>WORKDIR</code></strong>: Çalışma dizinini belirtir.</li>
<li><strong><code>EXPOSE</code></strong>: Konteyner&rsquo;ın hangi portlarını dış dünyaya açacağını belirtir.</li>
<li><strong><code>CMD</code></strong>: Konteyner çalıştırıldığında otomatik olarak çalışacak komutu belirtir.</li>
</ul>
<h3 id="örnek-2">
  Örnek
  <a class="heading-link" href="#%c3%b6rnek-2">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Alttaki örnekte ubuntu&rsquo;nun 18.04 sürümünü temel alacağımı belirttim. Ardından bu image&rsquo;de olması gereken yükleme işlemlerini run komutu ile gerçekleştirdim. Ana dizinimi /app yaptıktan sonra kendi makinemden ./script.sh &lsquo;ı konteyner içine kopyaladım. Son olarak konteyner çalıştığında çalışmasını istediğim komutu yazdım.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Dockerfile" data-lang="Dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:18.04</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt update -y <span class="o">&amp;&amp;</span> apt install nano<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /app</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> ./script.sh .<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;./script.sh&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></div><p>Bu üstteki Dockerfile ı image yapmak için <code>docker build -t image_tag dockerfilePath</code> yazarız.</p>
<h2 id="14-docker-compose">
  1.4 Docker Compose
  <a class="heading-link" href="#14-docker-compose">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="neden-lazım">
  Neden Lazım?
  <a class="heading-link" href="#neden-laz%c4%b1m">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Biz <code>docker run</code> kullanarak bir tane konteyner çalıştırıyoruz. Peki birden fazla konteyner&rsquo;ı çalıştırmayı ayrıca bunları birbirine bağlamayı istersek ne yapacağız?</p>
<p>Modern bir site düşünelim. <em>Backend: golang</em>, <em>Web Server: ngnix</em>, <em>Frontend: reactJS</em> ve <em>Database: PostgreSQL</em> olsun. Ben bu siteyi docker&rsquo;da kaldırmak için yapmam gereken 9 satır komut vardır.</p>
<p>Ilk olarak hepsi için <code>docker build</code> komutunu kullanıp <strong>Dockerfile</strong> larını kullanarak image&rsquo;lerini oluşturmak. Sonra bu konteyner&rsquo;ların birbirleri ile haberleşmesini sağlamak için <code>docker network create name</code> ile bir ağ oluşturmak. En son olarakta bu image&rsquo;lerin hepsi için <code>docker run</code> yazıp <code>--network</code> tagı veya spesifik konteyner için spesifik option&rsquo;ları eklemeliyim ki düzgün bir şekilde çalışabilsin.</p>
<p>Bu işlemi açıkça zor ve zaman alıcıdır. Bunu daha kolay yapmak için <strong>docker compose</strong> kullanıyoruz.</p>
<h3 id="nedir-3">
  Nedir?
  <a class="heading-link" href="#nedir-3">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Docker Compose, Docker tarafından sağlanan ve çoklu konteynerlı uygulamaları tanımlamak, yönetmek ve çalıştırmak için kullanılan bir araçtır.</p>
<h3 id="neden-ihtiyacımız-var">
  Neden İhtiyacımız Var?
  <a class="heading-link" href="#neden-ihtiyac%c4%b1m%c4%b1z-var">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Modern bir site düşünelim. Frontend olarak React, Backend olarak Go, Web sunucusu olarak Nginx, Veritabanı olarak PostgreSQL kullanalım.</p>
<p>Bu senaryoda en az 4 konteyner bulunmaktadır. Konteyner&rsquo;ları build edeceğiz ve çalıştıracağız aynı zamanda bazı konteynerların birbirine bağlanması için bir ağ oluşturmamız gerekmektedir.</p>
<p>Şimdi minimal bir modern siteyi ayağa kaldırmak için kaç komut kullanmamız gerektiğine bakalım. İlk olarak konteynerları oluşturmamız gerekmektedir, bu nedenle 4 kez <code>docker build ...</code> komutunu kullanırız. Ardından, konteynerlar arasında bir ağ oluşturmak için <code>docker network create ...</code> komutunu kullanırız ve son olarak konteynerları çalıştırmak için <code>docker run ...</code> komutunu kullanırız. Ancak bu şekilde her bir konteyner için komutları hatırlamak ve yazmak zor olabilir.</p>
<p>Yukarıda da belirtildiği gibi toplamda 9 satır komut yazdık ve yalnızca bir minimal modern siteyi çalıştırdık. İşte bu nedenle Docker Compose&rsquo;u kullanıyoruz.</p>
<h3 id="nasıl-yapılır">
  Nasıl Yapılır?
  <a class="heading-link" href="#nas%c4%b1l-yap%c4%b1l%c4%b1r">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Docker Compose, YAML formatında bir dosya kullanarak birden fazla Docker konteynerini tek bir uygulama olarak tanımlamanıza ve yönetmenize olanak tanır.</p>
<p>Bu dosyayı birden fazla Dockerfile için yazacağınız <code>docker run ...</code> komutu olarak düşünebilirsiniz.
Her Dockerfile için ayrı ayrı <code>docker run</code> bilgilerini giriyorsunuz ve tek komutla bütün Dockerfile&rsquo;ları build edip çalıştırabiliyorsunuz.</p>
<p>Burada kısa olsun diye backend ve database olarak olarak anlatacağım. Bu kısa bir örnek olacak daha fazla bilgi için kaynakça&rsquo;ya bakabilirsiniz.</p>
<p>İlk olarak docker-compose.yml dosyası oluşturun.</p>
<pre tabindex="0"><code class="language-docker-compose" data-lang="docker-compose">version: &#39;3.9&#39;

services:
  backend:
    build: ./backend
    container_name: backend
    restart: always
    ports:
      - &#34;8081:8081&#34;
    depends_on:
      - postgres
    networks:
      - impact

  postgres:
    image: postgres:latest
    container_name: postgres
    environment:
      POSTGRES_USER: &#34;test&#34;
      POSTGRES_PASSWORD: &#34;test&#34;
      POSTGRES_DB: &#34;test&#34;
    ports:
      - &#34;5432:5432&#34;
    restart: on-failure
    volumes:
      - ./backend/script:/docker-entrypoint-initdb.d
      - ./postgres-data:/var/lib/postgresql/data
    networks:
      - impact

networks:
  impact:
    driver: bridge
</code></pre><ul>
<li><strong>version</strong>: Docker Compose versionunu belirtir.</li>
<li><strong>services</strong>: Docker Compose dosyasında tanımlanan servislerin başladığı bölümü başlatır.</li>
<li><strong>backend</strong>: Burada backend servisinin başladığını gösteriyor. Farklı şeylerde yazılabilir, örneğin web server, frontend gibi.</li>
<li><strong>image</strong>: Bu komut, kullanılacak Docker imajını belirtir. Genellikle resmi veya özel Docker imajları kullanılır.</li>
<li><strong>build</strong>: Dockerfile&rsquo;ın yerini belirtir.</li>
<li><strong>container_name</strong>: Oluşturulacak olan konteyner&rsquo;ın ismini verebilirsiniz.</li>
<li><strong>restart</strong>: Bu komut, bir konteynerin ne zaman yeniden başlatılacağını belirtir. <code>always</code>, <code>on-failure</code> veya <code>unless-stopped</code> gibi değerler alabilir.</li>
<li><strong>environment</strong>: Bu komut, bir konteynerin çalışma zamanı ortam değişkenlerini belirtir. Örneğin, veritabanı kullanıcı adı ve parolası gibi.</li>
<li><strong>volumes</strong>: Bu komut, host makinadaki dizinlerin veya dosyaların konteynere bağlanmasını sağlar. Bu, veri kalıcılığı ve paylaşımı için kullanılır.</li>
<li><strong>ports</strong>: Bu komut, bir konteynerin hangi portlarının host makinadaki portlara bağlanacağını belirtir. Genellikle <code>hostPort:containerPort</code> formatında kullanılır.</li>
<li><strong>depends_on</strong>: Bu komut, bir servisin başlaması için gereken diğer servisleri belirtir. Ancak, bu komut belirli bir servisin hazır olduğunu garanti etmez.</li>
<li><strong>networks</strong>: Bu komut, bir servisin hangi Docker ağlarında çalışacağını belirtir. Birden fazla ağa bağlanabilir ve ağlar arası iletişim sağlayabilir.</li>
</ul>
<p>Yukarıda temel olarak kullanılan docker-compose tagları yer alıyor. Tabikii daha fazla var bunun için kaynakça&rsquo;dan daha fazla bilgi edinebilirsiniz.</p>
<p>Bu örnekte backend servisi alttaki Postgres servisini kullanıyor ve network aracılığı ile birbirleri ile etkileşim halindeler. Şimdi bu servisleri alttaki komutlar ile çalıştırıp kullanıma hazır hale getirebilirsiniz.</p>
<ul>
<li><code>docker compose build</code>: Bu komut, belirtilen docker dosyalarını (Dockerfile&rsquo;ları) kullanarak tüm hizmetlerin imajlarını oluşturur.</li>
<li><code>docker compose up</code>: Bu komut, diğer parametrelere göre belirtilen tüm hizmetler için bir <code>docker run</code> komutu oluşturur.</li>
<li><code>docker compose up --build</code>: Yazarak tek seferde iki işlemi yapabilirsiniz.</li>
</ul>
<h1 id="kaynakça">
  Kaynakça
  <a class="heading-link" href="#kaynak%c3%a7a">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<!-- raw HTML omitted -->
<ul>
<li><a href="https://tryhackme.com/room/introtodockerk8pdqk"  class="external-link" target="_blank" rel="noopener">Intro to Docker LAB</a></li>
<li><a href="https://www.youtube.com/watch?v=4XVfmGE1F_w&amp;t=922s&amp;ab_channel=kablosuzkedi"  class="external-link" target="_blank" rel="noopener">Kablosuz Kedi</a></li>
<li><a href="https://www.youtube.com/watch?v=HG6yIjZapSA&amp;t=81s&amp;ab_channel=ProgrammingwithMosh"  class="external-link" target="_blank" rel="noopener">Mosh</a></li>
<li><a href="https://github.com/docker/awesome-compose"  class="external-link" target="_blank" rel="noopener">Compose Samples</a></li>
</ul>
<!-- raw HTML omitted -->

      </div>


      <footer>
        

<section class="see-also">
  
    
    
    
  
</section>


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2024
     Çetin Boran Mesüm 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
